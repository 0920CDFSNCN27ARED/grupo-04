<!DOCTYPE html>
<html>

<head>
    <%- include("../partials/head-base", {title: "Detalle del producto" }) %>
        <link rel="stylesheet" href="/css/productCreate.css" />
        <script type="text/javascript" src="/js/validator.min.js"></script>
        <script src="/js/utils/check-errors.js"></script>
        <script src="/js/utils/clear-validations.js"></script>
        <script src="/js/utils/validate-input.js"></script>
        <script src="/js/utils/is-true.js"></script>
        <script src="/js/validations-create-product.js"></script>
</head>

<body class="bg-muted">
    <header>
        <%- include("../partials/header") %>
    </header>
    <main>
        <h1 class="product-create-title font-size-1-3 text-align-center">
            <% if (typeof edit !="undefined" ) { %>
            <%= "Modificar los datos del producto" %>
            <% } else { %>
            <%= "Cargá los datos del producto que querés vender" %>
            <% } %>
        </h1>
        <div class="create-product-form-container create-product-form-container-lg">
            <form
                <% if (typeof edit !="undefined" ) { %>
                action="/product/<%= product.id %>/edit?_method=PUT" <%
                } else { %>
                action="/product/" 
                <% } %>
                method="POST"
                enctype="multipart/form-data" class="create-product-form padding-10" id="create-product-form" >
                <div class="display-flex flex-direction-column padding-5">
                    <label for="name">Nombre</label>
                    <input type="text" id="name" name="name" class="validate"
                <% if (typeof edit  !="undefined" ) { %>
                value="<%= product.name %>"
                <% } %> />
                            <i class="fas validation-icon" id="nameIcon"></i>
                            <div class="feedback" id="nameFeedback"></div>
                </div>
                <div class="display-flex flex-direction-column padding-5">
                    <label for="price">Precio</label>
                    <input type="number" id="price" name="price" class="validate"
                    <% if (typeof edit !="undefined" ) { %>
                    value="<%= product.price %>" <% } %> />
                    <i class="fas validation-icon" id="priceIcon"></i>
                    <div class="feedback" id="priceFeedback"></div>
                </div>
                <div class="display-flex flex-direction-column padding-5">
                    <label for="stock">Stock</label>
                    <input type="number" id="stock" name="stock" class="validate"
                    <% if (typeof edit  !="undefined" ) { %>
                    value="<%= product.stock %>" <% } %> />
                            <i class="fas validation-icon" id="stockIcon"></i>
                            <div class="feedback" id="stockFeedback"></div>
                </div>
                <div class="display-flex flex-direction-column padding-5">
                    <label for="categoryId">Categoría</label>
                    <select name="categoryId" id="categoryId" class="validate">
                        <!-- TODO recorrer caregorias y poner sin valor la primera opción -->
                        <option value="">Elegí una categoría...</option>
                        <option value="1">Muebles</option>
                        <option value="2">Computación</option>
                    </select>
                    <i class="fas validation-icon" id="categoryIdIcon"></i>
                    <div class="feedback" id="categoryIdFeedback"></div>
                </div>
                <div class="display-flex flex-direction-column padding-5">
                    <label for="description">Descripción</label>
                    <textarea class="validate" name="description" id="description" cols="30" rows="10">
<% if (typeof edit !="undefined" ) { %><%= product.description %><% } %></textarea>
                    <i class="fas validation-icon" id="descriptionIcon"></i>
                    <div class="feedback" id="descriptionFeedback"></div>
                </div>
                <div
                    class="display-flex flex-direction-column product-create-image-input-container padding-5">
                    <label for="image">Subir una foto</label>
                    <input type="file" name="image" id="image" />
                </div>
                <% if (typeof edit !="undefined" ) { %>
                    <div>
                        <p>Foto actual</p>
                        <img src="/images/products/<%= product.image %>" alt="" />
                    </div>
                    <% } %>
                        <div class="display-flex flex-direction-column padding-5">
                            <button class="bg-success text-light font-size-1-1" type="submit">
                                <% if (typeof edit !="undefined" ) { %> Modificar
                                    producto <% } else {%> Crear producto <% } %>
                            </button>
                        </div>
            </form>
        </div>
    </main>
    <footer class="bg-dark text-light text-align-center">
        <%- include("../partials/footer") %>
    </footer>
</body>

</html>